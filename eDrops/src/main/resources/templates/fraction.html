<!DOCTYPE HTML>
<html lang="en" th:lang="${langCode}"
      xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{template.html}">
<head>
    <title>Fraction</title>
</head>
<body>
<div layout:fragment="content">
    <h1 th:text="${doc.subject != null} ? ${doc.subject} : #{${doc.segment}}"/>
    <div class="container" th:utext="${docText}"></div><br>
    <form th:action="@{/fraction}" th:object="${fractionForm}" th:method="post">
        <div class="input-row">
            <label th:for="decimalNumber" th:text="#{decimalNumber}"></label>
            <input type="text" id="decimalNumber" th:field="*{decimalNumber}" maxLength="22">
            <span class="error" th:if="${#fields.hasErrors('decimalNumber')}" th:errors="*{decimalNumber}"></span>
        </div>
        <div class="input-row">
            <label th:for="maxDeviation" th:text="#{maxDeviation}"></label>
            <input type="text" id="maxDeviation" th:field="*{maxDeviation}" maxLength="22">
            <span class="error" th:if="${#fields.hasErrors('maxDeviation')}" th:errors="*{maxDeviation}"></span>
        </div>
        <div class="input-row">
            <label th:for="maxDenominator" th:text="#{maxDenominator}"></label>
            <input type="text" id="maxDenominator" th:field="*{maxDenominator}" maxLength="22">
            <span class="error" th:if="${#fields.hasErrors('maxDenominator')}" th:errors="*{maxDenominator}"></span>
        </div>
        <button type="submit" th:text="#{calculate}"></button>
        <th:block th:if="${result}">
            <p class="error" th:if="${result.error != null }" th:text="#{${result.error}}"></p>
            <p class="result-row" th:text="#{fraction} + ': ' + ${result.numerator} + ' / ' + ${result.denominator}"></p>
            <p class="result-row" th:text="#{deviation} + ': ' + ${result.deviation}"></p>
            <p class="result-row" th:text="#{iterations} + ': ' + ${result.iterations}"></p>
            <table id="fractionTable">
                <thead>
                <tr>
                    <th th:text="#{fraction}"></th>
                    <th th:text="#{deviation}"></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="fraction : ${result.fractions}">
                    <td th:text="${fraction.numerator} + ' / ' + ${fraction.denominator}"></td>
                    <td th:text="${fraction.deviation}"></td>
                </tr>
                </tbody>
            </table>

        </th:block>
    </form>
</div>
</body>
</html>